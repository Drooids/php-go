#!/usr/bin/env php
<?php

foreach (array(
    __DIR__ . '/../vendor/autoload.php',
    __DIR__ . '/../src/vendors/autoload.php'
) as $file) {
    if (file_exists($file)) {
        require $file;
        unset($file);
        break;
    }

    unset($file);
}

use Herrera\Pake\Pake;
use Herrera\Service\Process\ProcessServiceProvider;

call_user_func(function () {
    $app = new Pake('Pake', '@git_version@');
    $app->register(new ProcessServiceProvider());

    try {
    $app->load('Pakefile');

    } catch (Exception $exception) {
        $app['console']->renderException($exception, $app['console.output']);

        exit(1);
    }

    $app->run();
});